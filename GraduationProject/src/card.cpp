//===========================================================================================================================================================
// 
// カードの処理 [card.cpp]
// Author : 梅田　爽真
// 
//===========================================================================================================================================================
#include "card.h"
#include "game.h"

//===========================================================================================================
// コンストラクタ
//===========================================================================================================
My::CCard::CCard(int nPriority):CObjectX(nPriority)
{
}

//===========================================================================================================
// デストラクタ
//===========================================================================================================
My::CCard::~CCard()
{
}

//===========================================================================================================
// 初期化処理
//===========================================================================================================
HRESULT My::CCard::Init()
{
	// モデル設定
	CModel*pModel= CManager::GetInstance()->GetModel();
	int Idx = pModel->Regist("data\\model\\card_traial_002.x");
	CModel::MODEL_INFO mi = pModel->GetModelInfo(Idx);
	BindXFile(mi.pBuffMat, mi.dwNumMat, mi.pMesh);

	CObjectX::Init();

	// スケール
	D3DXVECTOR3 scale = GetScale();

	scale.x *= 1.2f;
	//scale *= 0.5f;

	SetScale(scale);

	return S_OK;
}

//===========================================================================================================
// 終了処理
//===========================================================================================================
void My::CCard::Uninit()
{
	CObjectX::Uninit();
}

//===========================================================================================================
// 更新処理
//===========================================================================================================
void My::CCard::Update()
{
	// カメラの位置と角度に合わせる
	CCamera* pCamera = CManager::GetInstance()->GetCamera(CGame::GAME_CAMERA);
	SetPos({ pCamera->GetPosV().x,pCamera->GetPosV().y - 100.0f,pCamera->GetPosV().z + 30.0f });

	D3DXVECTOR3 rot = pCamera->GetRot();
	rot.x += 0.3f;

	SetRot(rot);
}

//===========================================================================================================
// 描画処理
//===========================================================================================================
void My::CCard::Draw()
{
	CObjectX::Draw();
}

//===========================================================================================================
// 生成処理
//===========================================================================================================
My::CCard* My::CCard::Create()
{
	CCard* pCard = new CCard(5);
	pCard->Init();

	return pCard;
}


